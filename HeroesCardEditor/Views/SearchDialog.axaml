<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
		Width="400"
		Height="500"
			 xmlns:m="using:HeroesCardEditor.Models"
			 xmlns:vm="using:HeroesCardEditor.ViewModels"
        x:Class="HeroesCardEditor.SearchDialog"
		x:DataType="vm:FileEditorSearch">

	<Design.DataContext>
		<vm:FileEditorSearch/>
	</Design.DataContext>

	<Window.ContextFlyout>
		<Flyout ShowMode="Transient" Placement="Top"/>
	</Window.ContextFlyout>

	<Window.Title>
		<MultiBinding StringFormat="Find in {0}">
			<Binding Path="Editor.File.Name"/>
		</MultiBinding>
	</Window.Title>
	
	<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="15">
		<Grid RowDefinitions="*,15,*,15,*,15,*,15,*" ColumnDefinitions="*,15,*" >
			<StackPanel Grid.Column="0" Grid.Row="0">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by card type"
						   ToolTip.Tip="None for any."/>
				<ComboBox  HorizontalAlignment="Center"
						   ItemsSource="{x:Static m:CardProperties.CardTypesWithNone}"
						   SelectedItem="{Binding ByCardType,
							Mode=TwoWay,
							UpdateSourceTrigger=PropertyChanged}"/>
			</StackPanel>

			<StackPanel Grid.Column="2" Grid.Row="0">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by card faction"
						   ToolTip.Tip="None for any."/>
				<ComboBox  HorizontalAlignment="Center"
						   ItemsSource="{x:Static m:CardProperties.FactionsWithNone}"
						   SelectedItem="{Binding ByFaction,
							Mode=TwoWay,
							UpdateSourceTrigger=PropertyChanged}"/>
			</StackPanel>
			
			<StackPanel Grid.Column="0" Grid.Row="2">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by class"
						   ToolTip.Tip="None for any."/>
				<ComboBox  HorizontalAlignment="Center"
						   ItemsSource="{x:Static m:CardProperties.Colors}"
						   SelectedItem="{Binding ByColor,
							Mode=TwoWay,
							UpdateSourceTrigger=PropertyChanged}"/>
			</StackPanel>
			
			<StackPanel Grid.Column="2" Grid.Row="2">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by prefab name"
						   ToolTip.Tip="None for any."/>
				<TextBox HorizontalAlignment="Center"
						 Text="{Binding ByPrefabName, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="None for any."/>
			</StackPanel>

			<StackPanel Grid.Column="0" Grid.Row="4">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by rarity"
						   ToolTip.Tip="First option for any."/>
				<ComboBox HorizontalAlignment="Center"
						  ItemsSource="{x:Static m:CardProperties.RaritiesWithNone}"
						  SelectedItem="{Binding ByRarity, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="First option for any."/>
			</StackPanel>
			
			<StackPanel Grid.Column="2" Grid.Row="4">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by cost"
						   ToolTip.Tip="-1 for any."/>
				<NumericUpDown Value="{Binding BySunCost, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="-1 for any."/>
			</StackPanel>
			
			<StackPanel Grid.Column="0" Grid.Row="6">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by attack"
						   ToolTip.Tip="-1 for any."
						   Grid.Column="0"
						   Grid.Row="2"/>
				<NumericUpDown Value="{Binding ByAttack, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="-1 for any."/>
			</StackPanel>

			<StackPanel Grid.Column="2" Grid.Row="6">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by health"
						   ToolTip.Tip="-1 for any."
						   Grid.Column="1"
						   Grid.Row="2"/>
				<NumericUpDown Value="{Binding ByHealth, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="-1 for any."/>
			</StackPanel>

			<StackPanel Grid.Column="0" Grid.Row="8">
				<TextBlock HorizontalAlignment="Center"
						   Text="Search by tags"
						   ToolTip.Tip="None for any."/>
				<TextBox HorizontalAlignment="Center"
						 Text="{Binding ByTags, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip.Tip="None for any."/>
			</StackPanel>
		</Grid>

		<Button HorizontalAlignment="Center" Content="Find next">
			<Interaction.Behaviors>
				<EventTriggerBehavior EventName="Click">
					<InvokeCommandAction
						Command="{Binding Search}"
						CommandParameter="{Binding $parent[Window]}"/>
				</EventTriggerBehavior>
			</Interaction.Behaviors>
		</Button>
	</StackPanel>
</Window>
